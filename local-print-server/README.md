# å¥¶èŒ¶åº—æœ¬åœ°æ‰“å°æœåŠ¡

è¿æ¥ç½‘é¡µåå°ç³»ç»Ÿå’Œæœ¬åœ°æ‰“å°æœºçš„æ¡¥æ¢æœåŠ¡ã€‚

## åŠŸèƒ½ç‰¹ç‚¹

- ğŸ–¨ï¸ æ”¯æŒ USB çƒ­æ•æ‰“å°æœº
- ğŸŒ HTTP API æ¥å£
- ğŸ“¡ WebSocket å®æ—¶é€šä¿¡
- ğŸ¨ Web ç®¡ç†ç•Œé¢
- ğŸ“ è‡ªåŠ¨æ ¼å¼åŒ–å°ç¥¨
- ğŸ“Š æ‰“å°ç»Ÿè®¡

## å®‰è£…æ­¥éª¤

### 1. å®‰è£…ä¾èµ–

```bash
cd local-print-server
npm install
```

### 2. å¯åŠ¨æœåŠ¡

```bash
npm start
```

æœåŠ¡å¯åŠ¨åï¼š
- HTTP API: http://localhost:8080
- WebSocket: ws://localhost:8080
- ç®¡ç†ç•Œé¢: http://localhost:8080

## API æ¥å£

### å¥åº·æ£€æŸ¥
```http
GET /health
```

### è·å–æ‰“å°æœºçŠ¶æ€
```http
GET /api/printer/status
```

### è¿æ¥æ‰“å°æœº
```http
POST /api/printer/connect
```

### æ‰“å°è®¢å•
```http
POST /api/print/order
Content-Type: application/json

{
  "storeName": "å¥¶èŒ¶åº—",
  "orderNo": "20240210123456",
  "createTime": "2024-02-10T12:34:56",
  "items": [
    {
      "name": "çç å¥¶èŒ¶",
      "quantity": 2,
      "price": 15.00,
      "specs": ["å¤§æ¯", "å°‘å†°", "ä¸ƒåˆ†ç³–"]
    }
  ],
  "subtotal": 48.00,
  "discount": 5.00,
  "total": 43.00,
  "payType": "å¾®ä¿¡æ”¯ä»˜",
  "payTime": "2024-02-10T12:35:00"
}
```

### æ‰“å°æµ‹è¯•é¡µ
```http
POST /api/print/test
```

## ä¸åå°ç³»ç»Ÿé›†æˆ

åœ¨åå°ç³»ç»Ÿä¸­æ·»åŠ æ‰“å°è°ƒç”¨ï¼š

```javascript
// è®¢å•åˆ›å»ºåè‡ªåŠ¨æ‰“å°
async function printOrder(orderData) {
  const response = await fetch('http://localhost:8080/api/print/order', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(orderData)
  });
  return response.json();
}
```

## ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     HTTP/WebSocket     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     USB     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç½‘é¡µåå°   â”‚  â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  â”‚ æ‰“å°æœåŠ¡    â”‚  â—„â”€â”€â”€â”€â”€â”€â–º  â”‚ æ‰“å°æœº  â”‚
â”‚  (æµè§ˆå™¨)   â”‚                        â”‚ (æœ¬æœåŠ¡)    â”‚            â”‚         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ³¨æ„äº‹é¡¹

1. æœåŠ¡éœ€è¦åœ¨æ”¶é“¶ç”µè„‘ä¸Šè¿è¡Œ
2. æ‰“å°æœºéœ€è¦è¿æ¥åˆ°æ”¶é“¶ç”µè„‘
3. æ”¶é“¶ç”µè„‘éœ€è¦èƒ½è®¿é—®åå°ç³»ç»Ÿ
4. åå°ç³»ç»Ÿéœ€è¦èƒ½è®¿é—®æ‰“å°æœåŠ¡

## æ•…éšœæ’æŸ¥

### æ‰“å°æœºæ— æ³•è¿æ¥
- æ£€æŸ¥ USB è¿æ¥
- æ£€æŸ¥æ‰“å°æœºç”µæº
- æŸ¥çœ‹è®¾å¤‡ç®¡ç†å™¨ä¸­çš„æ‰“å°æœºçŠ¶æ€

### æ‰“å°æœåŠ¡æ— æ³•å¯åŠ¨
- æ£€æŸ¥ç«¯å£ 8080 æ˜¯å¦è¢«å ç”¨
- æ£€æŸ¥ Node.js ç‰ˆæœ¬ï¼ˆéœ€è¦ v14+ï¼‰

### åå°æ— æ³•è°ƒç”¨æ‰“å°æœåŠ¡
- æ£€æŸ¥é˜²ç«å¢™è®¾ç½®
- ç¡®è®¤åå°ç³»ç»Ÿèƒ½è®¿é—® http://localhost:8080
